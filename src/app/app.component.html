<h4>MapleStory Abyssal Expedition </h4>
<p class="sub-header">If you like this project, please consider starring my <a href="https://github.com/telunc/maplestory-abyssal-expedition" target="_blank">GitHub Project Page</a></p>

<form [formGroup]="form">
  <div class="form-wrapper">
    <div class="rank-details">
      <mat-form-field appearance="fill">
        <mat-label>Rank</mat-label>
        <mat-select formControlName="rankName">
          <mat-option *ngFor="let rank of ranks" [value]="rank.rank">
            {{rank.rank}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <p>
        <mat-form-field appearance="fill">
          <mat-label>Reputation</mat-label>
          <input type="number" formControlName="reputation" matInput placeholder="Placeholder">
        </mat-form-field>
      </p>

      <p>
        <mat-form-field appearance="fill">
          <mat-label>Time used today (minutes)</mat-label>
          <input type="number" formControlName="timeUsedToday" matInput placeholder="Placeholder">
        </mat-form-field>
      </p>

      <p>
        <mat-checkbox class="example-margin" formControlName="hasRecruitedToday">Has recruited today</mat-checkbox>
      </p>

      <button mat-raised-button color="primary" [disabled]="!form.valid || dataSource.length < 2" (click)="search()">Calculate</button>
    </div>

    <div class="members">

      <button class="member-add" mat-button (click)="openDialog('Add',{})" mat-flat-button color="primary">Add Row</button>

      <table mat-table [dataSource]="dataSource" #mytable class="my-table mat-elevation-z8">

        <!--- Note that these columns can be defined in any order.
            The actual rendered columns are set as a property on the row definition" -->

        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Recruits </th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>

        <!-- Time Column -->
        <ng-container matColumnDef="time">
          <th mat-header-cell *matHeaderCellDef> Time </th>
          <td mat-cell *matCellDef="let element"> {{element.time}} </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element" class="action-link">
            <a (click)="openDialog('Update',element)">Edit</a> |
            <a (click)="openDialog('Delete',element)">Delete</a>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

    </div>
  </div>
</form>


<mat-card *ngFor="let day of progress">
  <mat-card-content>
    <h4>Day {{ day.day }}</h4>
    <p *ngFor="let message of day.messages">{{ message }}</p>
    <div class="summary"><b>Rank:</b> {{ day.rank }}</div>
    <div class="summary"><b>Reputation:</b> {{ day.reputation }}</div>
    <div class="summary"><b>Total time:</b> {{ day.totalTimeUsedToday }}</div>
    <div class="summary"><b>Total levels:</b> {{ day.totalLevel }}</div>
    <!-- {{ day | json }} -->
  </mat-card-content>
</mat-card>
